<html>

<head>
</head>

<script type="text/javascript" src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
<script type="text/javascript">

	var infoset_cache_waiters = {};
	var infoset_cache = {};

	// mini ajax fetcher for infosets with caching
	function fetch_infoset(what, callback) {
		if(infoset_cache[what]) {
			callback(infoset_cache[what]);
		}

		if(infoset_cache_waiters[what]) {
			infoset_cache_waiters[what].push(callback);
			return;
		}

		infoset_cache_waiters[what] = [callback];

		var ajax;
  		if (window.XMLHttpRequest) {
	  		ajax = new XMLHttpRequest();
		}
		else {
	  		ajax = new ActiveXObject("Microsoft.XMLHTTP");
		}

		ajax.onreadystatechange = function() {
			if (ajax.readyState==4) {
				var infoset = JSON.parse(ajax.responseText);

				var waiters = infoset_cache_waiters[what];
				for (var i = 0; i < waiters.length; ++i) {
					waiters[i](infoset);
				}
			}
		}

		ajax.open("GET",what,true);
		ajax.send(null);
	}


	function run() {
		fetch_infoset('output/DatagramSocket.json', function(infoset) {
			var text = '<h2> <font size="-1">' + infoset.access_prefix + ' ' + 
				infoset.extra_prefix + ' ' +
				 infoset.type + ' </font>' + 
				 infoset.name + '</h2>' + 
				 infoset.long_desc;
			$(".left").html(text);

			$(".right").html('TODO');
		});
	}

</script>

<body onload="run();">
	<link href="temp_githubstyle.css" rel="stylesheet"></link>

	<div class="left">
	</div>

	<div class="right">
	</div>


</body>

</html>